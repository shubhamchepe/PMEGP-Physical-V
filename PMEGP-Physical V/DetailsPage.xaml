<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="PMEGP_Physical_V.DetailsPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             Title="Physical Verification"
             BackgroundColor="White"
             NavigationPage.HasNavigationBar="False">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- Header Section with Green Background - Responsive Height -->
        <Grid Grid.Row="0" 
          BackgroundColor="#4CAF50" 
          Padding="15,5,15,5"
          HeightRequest="50">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!-- Back Button -->
            <Button x:Name="BackButton"
                Grid.Column="0"
                Text="‹"
                TextColor="White"
                BackgroundColor="Transparent"
                FontSize="28"
                FontAttributes="Bold"
                WidthRequest="40"
                HeightRequest="40"
                Padding="0"
                Margin="0"
                VerticalOptions="Center"
                HorizontalOptions="Start"
                Clicked="OnBackButtonClicked" />

            <!-- Title Label -->
            <Label Grid.Column="1"
               Text="Physical Verification" 
               TextColor="White" 
               FontSize="16" 
               FontAttributes="Bold" 
               HorizontalOptions="Start"
               VerticalOptions="Center"
               Margin="10,0,0,0" />
        </Grid>

        <!-- Search Bar Section - Responsive Padding -->
        <Grid Grid.Row="1" 
          BackgroundColor="#F5F5F5" 
          Padding="15,10,15,10"
          HeightRequest="60">
            <Frame BackgroundColor="White"
               BorderColor="#E0E0E0"
               CornerRadius="8"
               Margin="0"
               HasShadow="False"
               Padding="12,0,12,0"
               HeightRequest="45">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <Entry x:Name="SearchEntry"
                       Grid.Column="0"
                       Placeholder="Search by Applicant's Name"
                       PlaceholderColor="#999999"
                       TextColor="Black"
                       FontSize="14"
                       Margin="0"
                       HeightRequest="45"
                       VerticalOptions="Fill"
                       VerticalTextAlignment="Center"
                       BackgroundColor="Transparent" />

                    <Image Grid.Column="1" 
                       Source="search.png"
                       Aspect="AspectFit"
                       WidthRequest="20"
                       HeightRequest="20"
                       Margin="10,0,0,0"
                       VerticalOptions="Center"
                       HorizontalOptions="End" />
                </Grid>
            </Frame>
        </Grid>

        <!-- Applicants List with Light Green Background - Fully Responsive -->
        <Frame Grid.Row="2" 
           BackgroundColor="#E8F5E8" 
           Padding="10,15,10,15"
           CornerRadius="0"
           HasShadow="False">
            <ScrollView>
                <Grid x:Name="ApplicantsContainer" 
                  RowSpacing="12">
                    <!-- Applicant cards will be generated dynamically by C# code -->
                </Grid>
            </ScrollView>
        </Frame>

        <!-- ✨ NEW: Loading Overlay - Add this entire section -->
        <AbsoluteLayout 
        x:Name="LoadingOverlay"
        IsVisible="False"
        BackgroundColor="#80000000"
        Grid.RowSpan="3"
        AbsoluteLayout.LayoutBounds="0,0,1,1"
        AbsoluteLayout.LayoutFlags="All">

            <Frame 
            AbsoluteLayout.LayoutBounds="0.5,0.5,120,120"
            AbsoluteLayout.LayoutFlags="PositionProportional"
            BackgroundColor="White"
            CornerRadius="20"
            HasShadow="True"
            Padding="20">

                <StackLayout 
                Spacing="10"
                HorizontalOptions="Center"
                VerticalOptions="Center">

                    <ActivityIndicator 
                    x:Name="LoadingSpinner"
                    IsRunning="False"
                    Color="#FF6B35"
                    WidthRequest="50"
                    HeightRequest="50"
                    HorizontalOptions="Center"
                    VerticalOptions="Center" />

                    <Label 
                    Text="Loading..."
                    FontSize="14"
                    TextColor="#666666"
                    HorizontalOptions="Center" />
                </StackLayout>
            </Frame>
        </AbsoluteLayout>
        <!-- ✨ END OF NEW SECTION -->
    </Grid>
</ContentPage>